
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>45个实用的JavaScript技巧 | 前端学习踩过的坑</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Cassie Xu">
    
    <meta name="description" content="本文是一篇转载加补充的文章，原文及译文信息如下：

原文：45 Useful JavaScript Tips, Tricks and Best Practices
作者：Saad Mousliki
译文：JavaScript奇技淫巧45招
作者：chensd

JavaScript是一个绝冠全球的编">
    
    
    
    
    <link rel="alternative" href="/atom.xml" title="前端学习踩过的坑" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/cassie.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/cassie.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="前端学习踩过的坑" title="前端学习踩过的坑"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="前端学习踩过的坑">前端学习踩过的坑</a></h1>
				<h2 class="blog-motto">By Cassie</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:xuyuan923.github.io/">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/01/07/45-useful-javascript-tips/" title="45个实用的JavaScript技巧" itemprop="url">45个实用的JavaScript技巧</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/u/0/104549020574856340457?rel=author" title="Cassie Xu" target="_blank" itemprop="author">Cassie Xu</a>
		
  <p class="article-time">
    <time datetime="2015-01-07T01:52:47.000Z" itemprop="datePublished">发表于1月 7 2015</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#首次为变量赋值时务必使用var关键字"><span class="toc-number">1.</span> <span class="toc-text">首次为变量赋值时务必使用var关键字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用===取代=="><span class="toc-number">2.</span> <span class="toc-text">使用===取代==</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#注意区别使用typeof、instanceof和contructor"><span class="toc-number">3.</span> <span class="toc-text">contructor</code></span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用自调用函数"><span class="toc-number">4.</span> <span class="toc-text">使用自调用函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#从数组中随机获取成员"><span class="toc-number">5.</span> <span class="toc-text">从数组中随机获取成员</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#获取指定范围内的随机数"><span class="toc-number">6.</span> <span class="toc-text">获取指定范围内的随机数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生成从0到指定值的数字数组"><span class="toc-number">7.</span> <span class="toc-text">生成从0到指定值的数字数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生成随机的字母数字字符串"><span class="toc-number">8.</span> <span class="toc-text">生成随机的字母数字字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#打乱数字数组的顺序"><span class="toc-number">9.</span> <span class="toc-text">打乱数字数组的顺序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#对象转换为数组"><span class="toc-number">10.</span> <span class="toc-text">对象转换为数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#验证是否是数字"><span class="toc-number">11.</span> <span class="toc-text">验证是否是数字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#验证是否是数组"><span class="toc-number">12.</span> <span class="toc-text">验证是否是数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#获取数组中的最大值和最小值"><span class="toc-number">13.</span> <span class="toc-text">获取数组中的最大值和最小值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#清空数组"><span class="toc-number">14.</span> <span class="toc-text">清空数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#不要直接从数组中delete或remove元素"><span class="toc-number">15.</span> <span class="toc-text">不要直接从数组中delete或remove元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用length属性截断数组"><span class="toc-number">16.</span> <span class="toc-text">使用length属性截断数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在条件中使用逻辑与或"><span class="toc-number">17.</span> <span class="toc-text">在条件中使用逻辑与或</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#保留指定小数位数"><span class="toc-number">18.</span> <span class="toc-text">保留指定小数位数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#浮点计算的问题"><span class="toc-number">19.</span> <span class="toc-text">浮点计算的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#逗号操作符"><span class="toc-number">20.</span> <span class="toc-text">逗号操作符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#临时存储用于计算和查询的变量"><span class="toc-number">21.</span> <span class="toc-text">临时存储用于计算和查询的变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#提前检查传入isFinite()的参数"><span class="toc-number">22.</span> <span class="toc-text">提前检查传入isFinite()的参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#避免在数组中使用负数做索引"><span class="toc-number">23.</span> <span class="toc-text">避免在数组中使用负数做索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用JSON来序列化与反序列化"><span class="toc-number">24.</span> <span class="toc-text">用JSON来序列化与反序列化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#不要使用eval()或者函数构造器"><span class="toc-number">25.</span> <span class="toc-text">不要使用eval()或者函数构造器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#避免使用with()"><span class="toc-number">26.</span> <span class="toc-text">避免使用with()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#不要对数组使用for-in"><span class="toc-number">27.</span> <span class="toc-text">不要对数组使用for-in</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#传给setInterval()和setTimeout()时使用函数而不是字符串"><span class="toc-number">28.</span> <span class="toc-text">传给setInterval()和setTimeout()时使用函数而不是字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用switch/case代替一大叠的if/else"><span class="toc-number">29.</span> <span class="toc-text">使用switch/case代替一大叠的if/else</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在switch/case中使用数字区间"><span class="toc-number">30.</span> <span class="toc-text">在switch/case中使用数字区间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用对象作为对象的原型"><span class="toc-number">31.</span> <span class="toc-text">使用对象作为对象的原型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTML字段转换函数"><span class="toc-number">32.</span> <span class="toc-text">HTML字段转换函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#不要在循环内部使用try-catch-finally"><span class="toc-number">33.</span> <span class="toc-text">不要在循环内部使用try-catch-finally</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用XMLHttpRequests时注意设置超时"><span class="toc-number">34.</span> <span class="toc-text">使用XMLHttpRequests时注意设置超时</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#处理WebSocket的超时"><span class="toc-number">35.</span> <span class="toc-text">处理WebSocket的超时</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#时间注意原始操作符比函数调用快，使用VanillaJS"><span class="toc-number">36.</span> <span class="toc-text">时间注意原始操作符比函数调用快，使用VanillaJS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开发时注意代码结构，上线前检查并压缩JavaScript代码"><span class="toc-number">37.</span> <span class="toc-text">开发时注意代码结构，上线前检查并压缩JavaScript代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaScript博大精深，这里有些不错的学习资源"><span class="toc-number">38.</span> <span class="toc-text">JavaScript博大精深，这里有些不错的学习资源</span></a></li></ol>
		
		</div>
		
		<p>本文是一篇转载加补充的文章，原文及译文信息如下：</p>
<ul>
<li>原文：<a href="http://modernweb.com/2013/12/23/45-useful-javascript-tips-tricks-and-best-practices/" target="_blank">45 Useful JavaScript Tips, Tricks and Best Practices</a></li>
<li>作者：<a href="http://modernweb.com/authors/saad-mousliki/" target="_blank">Saad Mousliki</a></li>
<li>译文：<a href="http://chensd.com/2015-01/45-useful-javascript-tips-tricks-and-best-practices.html" target="_blank">JavaScript奇技淫巧45招</a></li>
<li>作者：<a href="http://chensd.com/" target="_blank">chensd</a></li>
</ul>
<p>JavaScript是一个绝冠全球的编程语言，可用于Web开发、移动应用开发（PhoneGap、Appcelerator）、服务器端开发（Node.js和Wakanda）等等。JavaScript还是很多新手踏入编程世界的第一个语言。既可以用来显示浏览器中的简单提示框，也可以通过nodebot或nodruino来控制机器人。能够编写结构清晰、性能高效的JavaScript代码的开发人员，现如今已成了招聘市场最受追捧的人。<br>在这篇文章里，我将分享一些JavaScript的技巧、秘诀和最佳实践，除了少数几个外，不管是浏览器的JavaScript引擎，还是服务器端JavaScript解释器，均适用。<br>本文中的示例代码，通过了在Google Chrome 30最新版（V8 3.20.17.15）上的测试。</p>
<h2 id="首次为变量赋值时务必使用var关键字">首次为变量赋值时务必使用var关键字</h2>
<p>变量没有声明而直接赋值得话，默认会作为一个新的全局变量，要尽量避免使用全局变量。</p>
<h2 id="使用===取代==">使用===取代==</h2>
<p>==和!=操作符会在需要的情况下自动转换数据类型。但===和!==不会，它们会同时比较值和数据类型，这也使得它们要比==和!=快。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre>[<span class="number">10</span>] === <span class="number">10</span>    <span class="comment">// is false</span>
[<span class="number">10</span>]  == <span class="number">10</span>    <span class="comment">// is true</span>
<span class="string">'10'</span> == <span class="number">10</span>     <span class="comment">// is true</span>
<span class="string">'10'</span> === <span class="number">10</span>    <span class="comment">// is false</span>
[]   == <span class="number">0</span>     <span class="comment">// is true</span>
[] ===  <span class="number">0</span>     <span class="comment">// is false</span>
<span class="string">''</span> == <span class="literal">false</span>   <span class="comment">// is true but true == "a" is false</span>
<span class="string">''</span> === <span class="literal">false</span>  <span class="comment">// is false</span>
</pre></td></tr></table></figure><br>## underfined，<code>null</code>，<code>0</code>，<code>false</code>，<code>NaN</code>，<code>‘’</code>的逻辑结果均为<code>false</code><br><br>## 行尾使用分号<br>实践中最好还是使用分号，忘了写也没事，大部分情况下JavaScript解释器都会自动添加。对于为何要使用分号，可参考文章<a href="http://davidwalsh.name/javascript-semicolons" target="_blank">JavaScript中关于分号的真相</a>。<br><br>## 使用对象构造器<br><br><figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(firstName, lastName)</span>{</span>
    <span class="keyword">this</span>.firstName =  firstName;
    <span class="keyword">this</span>.lastName = lastName;
}
<span class="keyword">var</span> Saad = <span class="keyword">new</span> Person(<span class="string">"Saad"</span>, <span class="string">"Mousliki"</span>);
</pre></td></tr></table></figure>

<h2 id="注意区别使用typeof、instanceof和contructor">注意区别使用<code>typeof</code>、<code>instanceof</code>和<code>contructor</code></h2>
<ul>
<li>typeof:JavaScript一元操作符，用于以字符串的形式返回变量的原始类型，注意，typeof null也会返回object，大多数的对象类型（数组Array、时间Date等）也会返回object</li>
<li>constructor: 内部原型属性，可以通过代码重写</li>
<li>instanceof: JavaScript操作符，会在原型链中的构造器中搜索，找到则返回true，否则返回false</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="keyword">var</span> arr = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>];
<span class="keyword">typeof</span> arr;  <span class="comment">// return "object"</span>
arr <span class="keyword">instanceof</span> <span class="built_in">Array</span> <span class="comment">// true</span>
arr.constructor();  <span class="comment">//[]</span>
</pre></td></tr></table></figure>

<h2 id="使用自调用函数">使用自调用函数</h2>
<p>函数在创建之后直接自动执行，通常称之为自调用匿名函数（Self-Invoked Anonymous Function）或直接调用函数表达式（Immediately Invoked Function Expression ）。格式如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>(<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
    <span class="comment">// 置于此处的代码将自动执行</span>
})();
(<span class="function"><span class="keyword">function</span><span class="params">(a,b)</span>{</span>
    <span class="keyword">var</span> result = a+b;
    <span class="keyword">return</span> result;
})(<span class="number">10</span>,<span class="number">20</span>)
</pre></td></tr></table></figure>

<h2 id="从数组中随机获取成员">从数组中随机获取成员</h2>
<ul>
<li>Math.random()将随机出现[0,1]区间随机数</li>
<li>Math.floor()方法执行的是向下取整计算，它返回的是小于或等于函数参数，并且与之最接近的整数。<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> items = [<span class="number">12</span>, <span class="number">548</span> , <span class="string">'a'</span> , <span class="number">2</span> , <span class="number">5478</span> , <span class="string">'foo'</span> , <span class="number">8852</span>, , <span class="string">'Doe'</span> , <span class="number">2145</span> , <span class="number">119</span>];
<span class="keyword">var</span> randomItem = items[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * items.length)];
</pre></td></tr></table></figure>

</li>
</ul>
<h2 id="获取指定范围内的随机数">获取指定范围内的随机数</h2>
<p>这个功能在生成测试用的假数据时特别有用，比如在与指定范围内的工资数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="keyword">var</span> x = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>)) + min;
</pre></td></tr></table></figure>

<h2 id="生成从0到指定值的数字数组">生成从0到指定值的数字数组</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> numbersArray = [] , max = <span class="number">100</span>;
<span class="keyword">for</span>( <span class="keyword">var</span> i=<span class="number">1</span>; numbersArray.push(i++) &lt; max;);  <span class="comment">// numbers = [1,2,3 ... 100]</span>
</pre></td></tr></table></figure>

<h2 id="生成随机的字母数字字符串">生成随机的字母数字字符串</h2>
<ul>
<li>toString(36):把一个Number对象转换为一个36进制字符串</li>
<li>substr(): 在字符串中抽取从 start 下标开始的指定数目的字符<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">generateRandomAlphaNum</span><span class="params">(len)</span> {</span>
    <span class="keyword">var</span> rdmString = <span class="string">""</span>;
    <span class="keyword">for</span>( ; rdmString.length &lt; len; rdmString  += <span class="built_in">Math</span>.random().toString(<span class="number">36</span>).substr(<span class="number">2</span>));
    <span class="keyword">return</span>  rdmString.substr(<span class="number">0</span>, len);
}
</pre></td></tr></table></figure>

</li>
</ul>
<h2 id="打乱数字数组的顺序">打乱数字数组的顺序</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="keyword">var</span> numbers = [<span class="number">5</span>, <span class="number">458</span> , <span class="number">120</span> , -<span class="number">215</span> , <span class="number">228</span> , <span class="number">400</span> , <span class="number">122205</span>, -<span class="number">85411</span>];
numbers = numbers.sort(<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span> <span class="keyword">return</span> <span class="built_in">Math</span>.random() - <span class="number">0.5</span>});
<span class="comment">/* numbers 数组将类似于 [120, 5, 228, -215, 400, 458, -85411, 122205]  */</span>
</pre></td></tr></table></figure><br>这里使用了JavaScript内置的数组排序函数，更好的办法是用专门的代码来实现（如Fisher-Yates算法），可以参见StackOverFlow上的<a href="http://stackoverflow.com/questions/962802/is-it-correct-to-use-javascript-array-sort-method-for-shuffling/962890#962890" target="_blank">这个讨论</a>。<br><br>## 字符串去空格<br>Java、C#和PHP等语言都实现了专门的字符串去空格函数，但JavaScript中是没有的，可以通过下面的代码来为String对象函数一个trim函数：<br><figure class="highlight js"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="built_in">String</span>.prototype.trim = <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span><span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">""</span>);};
</pre></td></tr></table></figure><br>新的JavaScript引擎已经有了trim()的原生实现。<br><br>## 数组之间追加<br><br><figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">var</span> array1 = [<span class="number">12</span> , <span class="string">"foo"</span> , -<span class="number">2458</span>];
<span class="keyword">var</span> array2 = [<span class="string">"Doe"</span> , <span class="number">555</span> , <span class="number">100</span>];
<span class="built_in">Array</span>.prototype.push.apply(array1, array2);
console.log(array1);
<span class="comment">/* array1 值为  [12 , "foo" , -2458 , "Doe" , 555 , 100] */</span>
</pre></td></tr></table></figure>

<h2 id="对象转换为数组">对象转换为数组</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="keyword">var</span> argArray = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);
</pre></td></tr></table></figure>

<h2 id="验证是否是数字">验证是否是数字</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">isNumber</span><span class="params">(n)</span>{</span>
    <span class="keyword">return</span> !<span class="built_in">isNaN</span>(<span class="built_in">parseFloat</span>(n)) && <span class="built_in">isFinite</span>(n);
}
</pre></td></tr></table></figure>

<h2 id="验证是否是数组">验证是否是数组</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">isArray</span><span class="params">(obj)</span>{</span>
    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) === <span class="string">'[object Array]'</span> ;
}
</pre></td></tr></table></figure>

<p>但如果toString()方法被重写过得话，就行不通了。也可以使用下面的方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="built_in">Array</span>.isArray(obj); <span class="comment">// its a new Array method</span>
</pre></td></tr></table></figure>

<p>如果在浏览器中没有使用frame，还可以用instanceof，但如果上下文太复杂，也有可能出错。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="keyword">var</span> myFrame = document.createElement(<span class="string">'iframe'</span>);
document.body.appendChild(myFrame);
<span class="keyword">var</span> myArray = window.frames[window.frames.length-<span class="number">1</span>].Array;
<span class="keyword">var</span> arr = <span class="keyword">new</span> myArray(a,b,<span class="number">10</span>); <span class="comment">// [a,b,10]</span>
<span class="comment">// myArray 的构造器已经丢失，instanceof 的结果将不正常</span>
<span class="comment">// 构造器是不能跨 frame 共享的</span>
arr <span class="keyword">instanceof</span> <span class="built_in">Array</span>; <span class="comment">// false</span>
</pre></td></tr></table></figure>

<h2 id="获取数组中的最大值和最小值">获取数组中的最大值和最小值</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="keyword">var</span>  numbers = [<span class="number">5</span>, <span class="number">458</span> , <span class="number">120</span> , -<span class="number">215</span> , <span class="number">228</span> , <span class="number">400</span> , <span class="number">122205</span>, -<span class="number">85411</span>];
<span class="keyword">var</span> maxInNumbers = <span class="built_in">Math</span>.max.apply(<span class="built_in">Math</span>, numbers);
<span class="keyword">var</span> minInNumbers = <span class="built_in">Math</span>.min.apply(<span class="built_in">Math</span>, numbers);
</pre></td></tr></table></figure>

<h2 id="清空数组">清空数组</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> myArray = [<span class="number">12</span> , <span class="number">222</span> , <span class="number">1000</span> ];
myArray.length = <span class="number">0</span>; <span class="comment">// myArray will be equal to [].</span>
</pre></td></tr></table></figure>

<h2 id="不要直接从数组中delete或remove元素">不要直接从数组中delete或remove元素</h2>
<p>如果对数组元素直接使用<code>delete</code>，其实并没有删除，只是将元素置为了<code>undefined</code>。数组元素删除应使用<code>**splice**</code>。</p>
<ul>
<li>arrayObject.splice(index,howmany,item1,…..,itemX): 向/从数组中添加/删除项目，然后返回被删除的项目。<br>这样做是错误的：<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">var</span> items = [<span class="number">12</span>, <span class="number">548</span> ,<span class="string">'a'</span> , <span class="number">2</span> , <span class="number">5478</span> , <span class="string">'foo'</span> , <span class="number">8852</span>, , <span class="string">'Doe'</span> ,<span class="number">2154</span> , <span class="number">119</span> ];
items.length; <span class="comment">// return 11</span>
<span class="keyword">delete</span> items[<span class="number">3</span>]; <span class="comment">// return true</span>
items.length; <span class="comment">// return 11</span>
<span class="comment">/* items 结果为 [12, 548, "a", undefined × 1, 5478, "foo", 8852, undefined × 1, "Doe", 2154, 119] */</span>
</pre></td></tr></table></figure>

</li>
</ul>
<p>应这样：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">var</span> items = [<span class="number">12</span>, <span class="number">548</span> ,<span class="string">'a'</span> , <span class="number">2</span> , <span class="number">5478</span> , <span class="string">'foo'</span> , <span class="number">8852</span>, , <span class="string">'Doe'</span> ,<span class="number">2154</span> , <span class="number">119</span> ];
items.length; <span class="comment">// return 11</span>
items.splice(<span class="number">3</span>,<span class="number">1</span>) ;
items.length; <span class="comment">// return 10</span>
<span class="comment">/* items 结果为 [12, 548, "a", 5478, "foo", 8852, undefined × 1, "Doe", 2154, 119]</span>
</pre></td></tr></table></figure>

<p>删除对象的属性时可以使用delete。</p>
<h2 id="使用length属性截断数组">使用length属性截断数组</h2>
<p>前面的例子中用length属性清空数组，同样还可用它来截断数组：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> myArray = [<span class="number">12</span> , <span class="number">222</span> , <span class="number">1000</span> , <span class="number">124</span> , <span class="number">98</span> , <span class="number">10</span> ];
myArray.length = <span class="number">4</span>; <span class="comment">// myArray will be equal to [12 , 222 , 1000 , 124].</span>
</pre></td></tr></table></figure><br>与此同时，如果把length属性变大，数组的长度值变会增加，会使用undefined来作为新的元素填充。length是一个可写的属性。<br><figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>myArray.length = <span class="number">10</span>; <span class="comment">// the new array length is 10</span>
myArray[myArray.length - <span class="number">1</span>] ; <span class="comment">// undefined</span>
</pre></td></tr></table></figure>

<h2 id="在条件中使用逻辑与或">在条件中使用逻辑与或</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="keyword">var</span> foo = <span class="number">10</span>;
foo == <span class="number">10</span> && doSomething(); <span class="comment">// is the same thing as if (foo == 10) doSomething();</span>
foo == <span class="number">5</span> || doSomething(); <span class="comment">// is the same thing as if (foo != 5) doSomething();</span>
</pre></td></tr></table></figure>

<p>逻辑或还可用来设置默认值，比如函数参数的默认值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span><span class="params">(arg1)</span>{</span>
    arg1 = arg1 || <span class="number">10</span>; <span class="comment">// arg1 will have 10 as a default value if it’s not already set</span>
}
</pre></td></tr></table></figure><br>## 使用map()函数方法对数据循环<br><br>- <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank">Array.prototype.map()</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="keyword">var</span> squares = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].map(<span class="function"><span class="keyword">function</span> <span class="params">(val)</span> {</span>
    <span class="keyword">return</span> val * val;
});
<span class="comment">// squares will be equal to [1, 4, 9, 16]</span>
</pre></td></tr></table></figure>

<h2 id="保留指定小数位数">保留指定小数位数</h2>
<ul>
<li><a href="http://www.w3school.com.cn/jsref/jsref_tofixed.asp" target="_blank">toFixed()</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> num =<span class="number">2.443242342</span>;
num = num.toFixed(<span class="number">4</span>);  <span class="comment">// num will be equal to 2.4432</span>
</pre></td></tr></table></figure><br>注意，toFixec()返回的是字符串，不是数字。</li>
</ul>
<h2 id="浮点计算的问题">浮点计算的问题</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="number">0.1</span> + <span class="number">0.2</span> === <span class="number">0.3</span> <span class="comment">// is false</span>
<span class="number">9007199254740992</span> + <span class="number">1</span> <span class="comment">// is equal to 9007199254740992</span>
<span class="number">9007199254740992</span> + <span class="number">2</span> <span class="comment">// is equal to 9007199254740994</span>
</pre></td></tr></table></figure><br>为什么呢？因为0.1+0.2等于0.30000000000000004。JavaScript的数字都遵循IEEE 754标准构建，在内部都是64位浮点小数表示，具体可以参见<a href="">JavaScript中的数字是如何编码的</a>.<br>可以通过使用<code>toFixed()</code>和<code>toPrecision()</code>来解决这个问题。<br><br>## 通过for-in循环检查对象的属性<br>下面这样的用法，可以防止迭代的时候进入到对象的原型属性中。<br><figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">for</span> (<span class="keyword">var</span> name <span class="keyword">in</span> object) {
    <span class="keyword">if</span> (object.hasOwnProperty(name)) {
        <span class="comment">// do something with name</span>
    }
}
</pre></td></tr></table></figure>

<h2 id="逗号操作符">逗号操作符</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="keyword">var</span> a = <span class="number">0</span>;
<span class="keyword">var</span> b = ( a++, <span class="number">99</span> );
console.log(a);  <span class="comment">// a will be equal to 1</span>
console.log(b);  <span class="comment">// b is equal to 99</span>
</pre></td></tr></table></figure>

<h2 id="临时存储用于计算和查询的变量">临时存储用于计算和查询的变量</h2>
<p>在jQuery选择器中，可以临时存储整个DOM元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="keyword">var</span> navright = document.querySelector(<span class="string">'#right'</span>);
<span class="keyword">var</span> navleft = document.querySelector(<span class="string">'#left'</span>);
<span class="keyword">var</span> navup = document.querySelector(<span class="string">'#up'</span>);
<span class="keyword">var</span> navdown = document.querySelector(<span class="string">'#down'</span>);
</pre></td></tr></table></figure>

<h2 id="提前检查传入isFinite()的参数">提前检查传入isFinite()的参数</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="built_in">isFinite</span>(<span class="number">0</span>/<span class="number">0</span>) ; <span class="comment">// false</span>
<span class="built_in">isFinite</span>(<span class="string">"foo"</span>); <span class="comment">// false</span>
<span class="built_in">isFinite</span>(<span class="string">"10"</span>); <span class="comment">// true</span>
<span class="built_in">isFinite</span>(<span class="number">10</span>);   <span class="comment">// true</span>
<span class="built_in">isFinite</span>(<span class="literal">undefined</span>);  <span class="comment">// false</span>
<span class="built_in">isFinite</span>();   <span class="comment">// false</span>
<span class="built_in">isFinite</span>(<span class="literal">null</span>);  <span class="comment">// true，这点当特别注意</span>
</pre></td></tr></table></figure>

<h2 id="避免在数组中使用负数做索引">避免在数组中使用负数做索引</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="keyword">var</span> numbersArray = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];
<span class="keyword">var</span> from = numbersArray.indexOf(<span class="string">"foo"</span>) ;  <span class="comment">// from is equal to -1</span>
numbersArray.splice(from,<span class="number">2</span>);    <span class="comment">// will return [5]</span>
</pre></td></tr></table></figure>

<p>注意传给splice的索引参数不要是负数，当是负数时，会从数组结尾处删除元素。</p>
<h2 id="用JSON来序列化与反序列化">用JSON来序列化与反序列化</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">var</span> person = {name :<span class="string">'Saad'</span>, age : <span class="number">26</span>, department : {ID : <span class="number">15</span>, name : <span class="string">"R&D"</span>} };
<span class="keyword">var</span> stringFromPerson = <span class="built_in">JSON</span>.stringify(person);
<span class="comment">/* stringFromPerson 结果为 "{"name":"Saad","age":26,"department":{"ID":15,"name":"R&D"}}"   */</span>
<span class="keyword">var</span> personFromString = <span class="built_in">JSON</span>.parse(stringFromPerson);
<span class="comment">/* personFromString 的值与 person 对象相同  */</span>
</pre></td></tr></table></figure>

<h2 id="不要使用eval()或者函数构造器">不要使用eval()或者函数构造器</h2>
<p>eval()和函数构造器（Function consturctor）的开销较大，每次调用，JavaScript引擎都要将源代码转换为可执行的代码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> func1 = <span class="keyword">new</span> <span class="built_in">Function</span>(functionCode);
<span class="keyword">var</span> func2 = <span class="built_in">eval</span>(functionCode);
</pre></td></tr></table></figure>

<h2 id="避免使用with()">避免使用with()</h2>
<p>使用with()可以把变量加入到全局作用域中，因此，如果有其它的同名变量，一来容易混淆，二来值也会被覆盖。</p>
<h2 id="不要对数组使用for-in">不要对数组使用for-in</h2>
<p>避免：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="keyword">var</span> sum = <span class="number">0</span>;
<span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> arrayNumbers) {
    sum += arrayNumbers[i];
}
</pre></td></tr></table></figure>

<p>而是：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="keyword">var</span> sum = <span class="number">0</span>;
<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arrayNumbers.length; i &lt; len; i++) {
    sum += arrayNumbers[i];
}
</pre></td></tr></table></figure>

<p>另外一个好处是，i和len两个变量是在for循环的第一个声明中，二者只会初始化一次，这要比下面这种写法快：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arrayNumbers.length; i++)
</pre></td></tr></table></figure>

<h2 id="传给setInterval()和setTimeout()时使用函数而不是字符串">传给setInterval()和setTimeout()时使用函数而不是字符串</h2>
<p>如果传给setTimeout()和setInterval()一个字符串，他们将会用类似于eval方式进行转换，这肯定会要慢些，<br>因此不要使用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>setInterval(<span class="string">'doSomethingPeriodically()'</span>, <span class="number">1000</span>);
setTimeout(<span class="string">'doSomethingAfterFiveSeconds()'</span>, <span class="number">5000</span>);
</pre></td></tr></table></figure>

<p>而是用:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>setInterval(doSomethingPeriodically, <span class="number">1000</span>);
setTimeout(doSomethingAfterFiveSeconds, <span class="number">5000</span>);
</pre></td></tr></table></figure>

<h2 id="使用switch/case代替一大叠的if/else">使用switch/case代替一大叠的if/else</h2>
<p>当判断有超过两个分支的时候使用switch/case要更快一些，而且也更优雅，更利于代码的组织，当然，如果有超过10个分支，就不要使用switch/case了。</p>
<h2 id="在switch/case中使用数字区间">在switch/case中使用数字区间</h2>
<p>其实，switch/case中的case条件，还可以这样写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">getCategory</span><span class="params">(age)</span> {</span>
    <span class="keyword">var</span> category = <span class="string">""</span>;
    <span class="keyword">switch</span> (<span class="literal">true</span>) {
        <span class="keyword">case</span> <span class="built_in">isNaN</span>(age):
            category = <span class="string">"not an age"</span>;
            <span class="keyword">break</span>;
        <span class="keyword">case</span> (age &gt;= <span class="number">50</span>):
            category = <span class="string">"Old"</span>;
            <span class="keyword">break</span>;
        <span class="keyword">case</span> (age &lt;= <span class="number">20</span>):
            category = <span class="string">"Baby"</span>;
            <span class="keyword">break</span>;
        <span class="keyword">default</span>:
            category = <span class="string">"Young"</span>;
            <span class="keyword">break</span>;
    };
    <span class="keyword">return</span> category;
}
getCategory(<span class="number">5</span>);  <span class="comment">// 将返回 "Baby"</span>
</pre></td></tr></table></figure>

<h2 id="使用对象作为对象的原型">使用对象作为对象的原型</h2>
<p>下面这样，便可以给定对象作为参数，来创建以此为原型的新对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">clone</span><span class="params">(object)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">OneShotConstructor</span><span class="params">()</span>{</span>};
    OneShotConstructor.prototype = object;
    <span class="keyword">return</span> <span class="keyword">new</span> OneShotConstructor();
}
clone(<span class="built_in">Array</span>).prototype ;  <span class="comment">// []</span>
</pre></td></tr></table></figure>

<h2 id="HTML字段转换函数">HTML字段转换函数</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre>function escapeHTML(text) {
    var replacements= {"&lt;": "&lt;", "&gt;": "&gt;","&": "&", "\"": """};
    return text.replace(/[&lt;&gt;&"]/g, function(character) {
        return replacements[character];
    });
}
</pre></td></tr></table></figure>

<h2 id="不要在循环内部使用try-catch-finally">不要在循环内部使用try-catch-finally</h2>
<p>try-catch-finally中catch部分在执行时会将异常赋给一个变量，这个变量会被构建成一个运行时作用域内的新的变量。<br>切忌：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="keyword">var</span> object = [<span class="string">'foo'</span>, <span class="string">'bar'</span>], i;
<span class="keyword">for</span> (i = <span class="number">0</span>, len = object.length; i &lt;len; i++) {
    <span class="keyword">try</span> {
        <span class="comment">// do something that throws an exception</span>
    }
    <span class="keyword">catch</span> (e) {
        <span class="comment">// handle exception</span>
    }
}
</pre></td></tr></table></figure>

<p>而应该：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="keyword">var</span> object = [<span class="string">'foo'</span>, <span class="string">'bar'</span>], i;
<span class="keyword">try</span> {
    <span class="keyword">for</span> (i = <span class="number">0</span>, len = object.length; i &lt;len; i++) {
        <span class="comment">// do something that throws an exception</span>
    }
}
<span class="keyword">catch</span> (e) {
    <span class="comment">// handle exception</span>
}
</pre></td></tr></table></figure>

<h2 id="使用XMLHttpRequests时注意设置超时">使用XMLHttpRequests时注意设置超时</h2>
<p>XMLHttpRequests在执行时，当长时间没有响应（如出现网络问题等）时，应该中止掉连接，可以通过setTimeout()来完成这个工作：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest ();
xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">if</span> (<span class="keyword">this</span>.readyState == <span class="number">4</span>) {
        clearTimeout(timeout);
        <span class="comment">// do something with response data</span>
    }
}
<span class="keyword">var</span> timeout = setTimeout( <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    xhr.abort(); <span class="comment">// call error callback</span>
}, <span class="number">60</span>*<span class="number">1000</span> <span class="comment">/* timeout after a minute */</span> );
xhr.open(<span class="string">'GET'</span>, url, <span class="literal">true</span>);
xhr.send();
</pre></td></tr></table></figure>

<p>同时需要注意的是，不要同时发起多个XMLHttpRequests请求。</p>
<h2 id="处理WebSocket的超时">处理WebSocket的超时</h2>
<p>通常情况下，WebSocket连接创建后，如果30秒内没有任何活动，服务器端会对连接进行超时处理，防火墙也可以对单位周期没有活动的连接进行超时处理。<br>为了防止这种情况的发生，可以每隔一定时间，往服务器发送一条空的消息。可以通过下面这两个函数来实现这个需求，一个用于使连接保持活动状态，另一个专门用于结束这个状态。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre><span class="keyword">var</span> timerID = <span class="number">0</span>;
<span class="function"><span class="keyword">function</span> <span class="title">keepAlive</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> timeout = <span class="number">15000</span>;
    <span class="keyword">if</span> (webSocket.readyState == webSocket.OPEN) {
        webSocket.send(<span class="string">''</span>);
    }
    timerId = setTimeout(keepAlive, timeout);
}
<span class="function"><span class="keyword">function</span> <span class="title">cancelKeepAlive</span><span class="params">()</span> {</span>
    <span class="keyword">if</span> (timerId) {
        cancelTimeout(timerId);
    }
}
</pre></td></tr></table></figure>

<p>keepAlive()函数可以放在WebSocket连接的onOpen()方法的最后面，cancelKeepAlive()放在onClose()方法的最末尾。</p>
<h2 id="时间注意原始操作符比函数调用快，使用VanillaJS">时间注意原始操作符比函数调用快，使用VanillaJS</h2>
<p>比如，一般不要这样：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> min = <span class="built_in">Math</span>.min(a,b);
A.push(v);
</pre></td></tr></table></figure>

<p>可以这样来代替：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> min = a &lt; b ? a : b;
A[A.length] = v;
</pre></td></tr></table></figure>

<h2 id="开发时注意代码结构，上线前检查并压缩JavaScript代码">开发时注意代码结构，上线前检查并压缩JavaScript代码</h2>
<p>可以使用JSLint或JSMin等工具来检查并压缩代码。</p>
<h2 id="JavaScript博大精深，这里有些不错的学习资源">JavaScript博大精深，这里有些不错的学习资源</h2>
<ul>
<li><a href="http://www.codecademy.com/tracks/javascript" target="_blank">Code Academy资源</a></li>
<li><a href="http://eloquentjavascript.net/" target="_blank">Marjin Haverbekex编写的Eloquent JavaScript</a></li>
<li><a href="http://ejohn.org/apps/learn/" target="_blank">John Resig编写的Advanced JavaScript</a></li>
</ul>
  
	</div>
		<footer class="article-footer clearfix">


  <div class="article-tags">
  
  <span></span> <a href="/tags/js/">js</a>
  </div>




<div class="article-share" id="share">

  <div data-url="http://xuyuan923.github.io/2015/01/07/45-useful-javascript-tips/" data-title="45个实用的JavaScript技巧 | 前端学习踩过的坑" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 

<div class="next">
<a href="/2015/01/03/mobile-debug/"  title="移动端前端开发真机调试实践">
 <strong>下一篇：</strong><br/> 
 <span>移动端前端开发真机调试实践
</span>
</a>
</div>

</nav>

	
<section class="comment">
	<div class="ds-thread"></div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#首次为变量赋值时务必使用var关键字"><span class="toc-number">1.</span> <span class="toc-text">首次为变量赋值时务必使用var关键字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用===取代=="><span class="toc-number">2.</span> <span class="toc-text">使用===取代==</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#注意区别使用typeof、instanceof和contructor"><span class="toc-number">3.</span> <span class="toc-text">contructor</code></span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用自调用函数"><span class="toc-number">4.</span> <span class="toc-text">使用自调用函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#从数组中随机获取成员"><span class="toc-number">5.</span> <span class="toc-text">从数组中随机获取成员</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#获取指定范围内的随机数"><span class="toc-number">6.</span> <span class="toc-text">获取指定范围内的随机数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生成从0到指定值的数字数组"><span class="toc-number">7.</span> <span class="toc-text">生成从0到指定值的数字数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生成随机的字母数字字符串"><span class="toc-number">8.</span> <span class="toc-text">生成随机的字母数字字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#打乱数字数组的顺序"><span class="toc-number">9.</span> <span class="toc-text">打乱数字数组的顺序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#对象转换为数组"><span class="toc-number">10.</span> <span class="toc-text">对象转换为数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#验证是否是数字"><span class="toc-number">11.</span> <span class="toc-text">验证是否是数字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#验证是否是数组"><span class="toc-number">12.</span> <span class="toc-text">验证是否是数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#获取数组中的最大值和最小值"><span class="toc-number">13.</span> <span class="toc-text">获取数组中的最大值和最小值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#清空数组"><span class="toc-number">14.</span> <span class="toc-text">清空数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#不要直接从数组中delete或remove元素"><span class="toc-number">15.</span> <span class="toc-text">不要直接从数组中delete或remove元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用length属性截断数组"><span class="toc-number">16.</span> <span class="toc-text">使用length属性截断数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在条件中使用逻辑与或"><span class="toc-number">17.</span> <span class="toc-text">在条件中使用逻辑与或</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#保留指定小数位数"><span class="toc-number">18.</span> <span class="toc-text">保留指定小数位数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#浮点计算的问题"><span class="toc-number">19.</span> <span class="toc-text">浮点计算的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#逗号操作符"><span class="toc-number">20.</span> <span class="toc-text">逗号操作符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#临时存储用于计算和查询的变量"><span class="toc-number">21.</span> <span class="toc-text">临时存储用于计算和查询的变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#提前检查传入isFinite()的参数"><span class="toc-number">22.</span> <span class="toc-text">提前检查传入isFinite()的参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#避免在数组中使用负数做索引"><span class="toc-number">23.</span> <span class="toc-text">避免在数组中使用负数做索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用JSON来序列化与反序列化"><span class="toc-number">24.</span> <span class="toc-text">用JSON来序列化与反序列化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#不要使用eval()或者函数构造器"><span class="toc-number">25.</span> <span class="toc-text">不要使用eval()或者函数构造器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#避免使用with()"><span class="toc-number">26.</span> <span class="toc-text">避免使用with()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#不要对数组使用for-in"><span class="toc-number">27.</span> <span class="toc-text">不要对数组使用for-in</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#传给setInterval()和setTimeout()时使用函数而不是字符串"><span class="toc-number">28.</span> <span class="toc-text">传给setInterval()和setTimeout()时使用函数而不是字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用switch/case代替一大叠的if/else"><span class="toc-number">29.</span> <span class="toc-text">使用switch/case代替一大叠的if/else</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在switch/case中使用数字区间"><span class="toc-number">30.</span> <span class="toc-text">在switch/case中使用数字区间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用对象作为对象的原型"><span class="toc-number">31.</span> <span class="toc-text">使用对象作为对象的原型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTML字段转换函数"><span class="toc-number">32.</span> <span class="toc-text">HTML字段转换函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#不要在循环内部使用try-catch-finally"><span class="toc-number">33.</span> <span class="toc-text">不要在循环内部使用try-catch-finally</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用XMLHttpRequests时注意设置超时"><span class="toc-number">34.</span> <span class="toc-text">使用XMLHttpRequests时注意设置超时</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#处理WebSocket的超时"><span class="toc-number">35.</span> <span class="toc-text">处理WebSocket的超时</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#时间注意原始操作符比函数调用快，使用VanillaJS"><span class="toc-number">36.</span> <span class="toc-text">时间注意原始操作符比函数调用快，使用VanillaJS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开发时注意代码结构，上线前检查并压缩JavaScript代码"><span class="toc-number">37.</span> <span class="toc-text">开发时注意代码结构，上线前检查并压缩JavaScript代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaScript博大精深，这里有些不错的学习资源"><span class="toc-number">38.</span> <span class="toc-text">JavaScript博大精深，这里有些不错的学习资源</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  

  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/tools/" title="tools">tools<sup>5</sup></a></li>
		
			<li><a href="/tags/node/" title="node">node<sup>4</sup></a></li>
		
			<li><a href="/tags/js/" title="js">js<sup>3</sup></a></li>
		
			<li><a href="/tags/移动端/" title="移动端">移动端<sup>2</sup></a></li>
		
			<li><a href="/tags/kissy/" title="kissy">kissy<sup>1</sup></a></li>
		
			<li><a href="/tags/生活/" title="生活">生活<sup>1</sup></a></li>
		
			<li><a href="/tags/CSS3/" title="CSS3">CSS3<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
      <li><a href="http://www.zhangxinxu.com/wordpress/" target="_blank" title="张鑫旭-鑫空间-鑫生活">张鑫旭-鑫空间-鑫生活</a></li>
      <li><a href="http://hustskyking.cnblogs.com/" target="_blank" title="小胡子哥-Barret Lee">小胡子哥-Barret Lee</a></li>
      <li><a href="http://yujiangshui.com/" target="_blank" title="于江水">于江水</a></li>
      <li><a href="http://www.36ria.com/" target="_blank" title="RIA 之家">RIA 之家</a></li>
      <li><a href="http://www.leapoahead.com/?from=inf&wvr=5&loc=infblog" target="_blank" title="淘宝子回——回田园">子回——回田园 </a></li> 
      <li><a href="http://padding.me/" target="_blank" title="padding me">padding me</a></li>
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		
		<a href="http://weibo.com/xuyuan923" target="_blank"><div class="author"></div></a>
		
	</div>
	
	
	<section class="info">
		<p> 我是一名大四的学生，热爱前端开发，喜欢捣鼓与折腾一切有好玩的东西~ <br/>
			这是我的github博客</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/xuyuan923" target="_blank" class="icon-weibo" title="weibo"></a>
		
		
		<a href="https://github.com/xuyuan923" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		<a href="https://plus.google.com/u/0/104549020574856340457?rel=author" target="_blank" class="icon-google_plus" title="Google+"></a>
		
		
		<a href="mailto:xuyuan923@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
		<p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Pacman">Jacman</a> © 2015 
		
		<a href="http://xuyuan923.github.io//about" target="_blank" title="Cassie Xu">Cassie Xu</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>


<script type="text/javascript">
  var duoshuoQuery = {short_name:"null"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<script src="/js/totop.js"></script>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script type="text/x-mathjax-config"> 
MathJax.Hub.Config({ 
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]} 
}); 
</script>
<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  </body>
</html>
